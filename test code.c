#pragma config(Motor,  port1,           topRight,      tmotorVex393_HBridge, openLoop, reversed)
#pragma config(Motor,  port2,           botRight,      tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port3,           topLeft,       tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port4,           botLeft,       tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port5,           leftBase,      tmotorVex393_MC29, openLoop, reversed)
#pragma config(Motor,  port6,           rightBase,     tmotorVex393_MC29, openLoop)
#pragma config(Motor,  port7,           sidewaysBase,  tmotorVex393_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

const float SENSITIVITY = 0.7; //%
//const float WRAPS = 5.5;

void setTwistMotors(int amount) {
	motor[topRight] = amount;
	motor[topLeft] = amount;
	motor[botRight] = amount;
	motor[botLeft] = amount;

}

void moveBase(int leftMotor, int rightMotor) {
	motor[rightBase] = rightMotor;
	motor[leftBase] = leftMotor;
}

task main() {
	while(true) {
		if(vexRT[Btn8D] == 1) {
			setTwistMotors(127);
		} else if(vexRT[Btn8U] == 1) {
			setTwistMotors(-127);
		} else {
			setTwistMotors(0);
		}
		int forwardVelocity = vexRT[Ch3] * SENSITIVITY; //-----------------------------------left joystick up + down
		int turnVelocity = vexRT[Ch1] * SENSITIVITY; //--------------------------------------right joystick left + right

		if(abs(forwardVelocity) < 20) { //deadzone check
			forwardVelocity = 0;
		}
		if(abs(turnVelocity) < 10) {
			turnVelocity = 0;
		}

		moveBase(forwardVelocity + turnVelocity, forwardVelocity - turnVelocity); //move(left, right)

		if(vexRT[Btn5U] == 1) { //slide left-------------------------------------------------left top trigger
			motor[sidewaysBase] = -127;
		} else if(vexRT[Btn6U] == 1) {//slide right------------------------------------------right top trigger
			motor[sidewaysBase] = 127;
		} else {
			motor[sidewaysBase] = 0;
		}
	}
}
